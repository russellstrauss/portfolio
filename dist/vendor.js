const Ft=["top","right","bottom","left"],ut=["start","end"],dt=Ft.reduce((t,e)=>t.concat(e,e+"-"+ut[0],e+"-"+ut[1]),[]),K=Math.min,z=Math.max,Wt={left:"right",right:"left",bottom:"top",top:"bottom"},Bt={start:"end",end:"start"};function lt(t,e,n){return z(t,K(e,n))}function I(t,e){return typeof t=="function"?t(e):t}function H(t){return t.split("-")[0]}function k(t){return t.split("-")[1]}function bt(t){return t==="x"?"y":"x"}function ct(t){return t==="y"?"height":"width"}const Ht=new Set(["top","bottom"]);function _(t){return Ht.has(H(t))?"y":"x"}function at(t){return bt(_(t))}function At(t,e,n){n===void 0&&(n=!1);const o=k(t),i=at(t),r=ct(i);let l=i==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(l=et(l)),[l,et(l)]}function Vt(t){const e=et(t);return[tt(t),e,tt(e)]}function tt(t){return t.replace(/start|end/g,e=>Bt[e])}const mt=["left","right"],gt=["right","left"],_t=["top","bottom"],$t=["bottom","top"];function jt(t,e,n){switch(t){case"top":case"bottom":return n?e?gt:mt:e?mt:gt;case"left":case"right":return e?_t:$t;default:return[]}}function Yt(t,e,n,o){const i=k(t);let r=jt(H(t),n==="start",o);return i&&(r=r.map(l=>l+"-"+i),e&&(r=r.concat(r.map(tt)))),r}function et(t){return t.replace(/left|right|bottom|top/g,e=>Wt[e])}function Nt(t){return{top:0,right:0,bottom:0,left:0,...t}}function Pt(t){return typeof t!="number"?Nt(t):{top:t,right:t,bottom:t,left:t}}function G(t){const{x:e,y:n,width:o,height:i}=t;return{width:o,height:i,top:n,left:e,right:e+o,bottom:n+i,x:e,y:n}}function ht(t,e,n){let{reference:o,floating:i}=t;const r=_(e),l=at(e),s=ct(l),c=H(e),f=r==="y",u=o.x+o.width/2-i.width/2,a=o.y+o.height/2-i.height/2,m=o[s]/2-i[s]/2;let d;switch(c){case"top":d={x:u,y:o.y-i.height};break;case"bottom":d={x:u,y:o.y+o.height};break;case"right":d={x:o.x+o.width,y:a};break;case"left":d={x:o.x-i.width,y:a};break;default:d={x:o.x,y:o.y}}switch(k(e)){case"start":d[l]-=m*(n&&f?-1:1);break;case"end":d[l]+=m*(n&&f?-1:1);break}return d}const Xt=async(t,e,n)=>{const{placement:o="bottom",strategy:i="absolute",middleware:r=[],platform:l}=n,s=r.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(e));let f=await l.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:a}=ht(f,o,c),m=o,d={},g=0;for(let h=0;h<s.length;h++){const{name:w,fn:p}=s[h],{x,y,data:A,reset:v}=await p({x:u,y:a,initialPlacement:o,placement:m,strategy:i,middlewareData:d,rects:f,platform:l,elements:{reference:t,floating:e}});u=x??u,a=y??a,d={...d,[w]:{...d[w],...A}},v&&g<=50&&(g++,typeof v=="object"&&(v.placement&&(m=v.placement),v.rects&&(f=v.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:i}):v.rects),{x:u,y:a}=ht(f,m,c)),h=-1)}return{x:u,y:a,placement:m,strategy:i,middlewareData:d}};async function ot(t,e){var n;e===void 0&&(e={});const{x:o,y:i,platform:r,rects:l,elements:s,strategy:c}=t,{boundary:f="clippingAncestors",rootBoundary:u="viewport",elementContext:a="floating",altBoundary:m=!1,padding:d=0}=I(e,t),g=Pt(d),w=s[m?a==="floating"?"reference":"floating":a],p=G(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(w)))==null||n?w:w.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(s.floating)),boundary:f,rootBoundary:u,strategy:c})),x=a==="floating"?{x:o,y:i,width:l.floating.width,height:l.floating.height}:l.reference,y=await(r.getOffsetParent==null?void 0:r.getOffsetParent(s.floating)),A=await(r.isElement==null?void 0:r.isElement(y))?await(r.getScale==null?void 0:r.getScale(y))||{x:1,y:1}:{x:1,y:1},v=G(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:x,offsetParent:y,strategy:c}):x);return{top:(p.top-v.top+g.top)/A.y,bottom:(v.bottom-p.bottom+g.bottom)/A.y,left:(p.left-v.left+g.left)/A.x,right:(v.right-p.right+g.right)/A.x}}const Qt=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:o,placement:i,rects:r,platform:l,elements:s,middlewareData:c}=e,{element:f,padding:u=0}=I(t,e)||{};if(f==null)return{};const a=Pt(u),m={x:n,y:o},d=at(i),g=ct(d),h=await l.getDimensions(f),w=d==="y",p=w?"top":"left",x=w?"bottom":"right",y=w?"clientHeight":"clientWidth",A=r.reference[g]+r.reference[d]-m[d]-r.floating[g],v=m[d]-r.reference[d],L=await(l.getOffsetParent==null?void 0:l.getOffsetParent(f));let O=L?L[y]:0;(!O||!await(l.isElement==null?void 0:l.isElement(L)))&&(O=s.floating[y]||r.floating[g]);const M=A/2-v/2,S=O/2-h[g]/2-1,b=K(a[p],S),R=K(a[x],S),T=b,F=O-h[g]-R,P=O/2-h[g]/2+M,X=lt(T,P,F),V=!c.arrow&&k(i)!=null&&P!==X&&r.reference[g]/2-(P<T?b:R)-h[g]/2<0,C=V?P<T?P-T:P-F:0;return{[d]:m[d]+C,data:{[d]:X,centerOffset:P-X-C,...V&&{alignmentOffset:C}},reset:V}}});function zt(t,e,n){return(t?[...n.filter(i=>k(i)===t),...n.filter(i=>k(i)!==t)]:n.filter(i=>H(i)===i)).filter(i=>t?k(i)===t||(e?tt(i)!==i:!1):!0)}const Ut=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,o,i;const{rects:r,middlewareData:l,placement:s,platform:c,elements:f}=e,{crossAxis:u=!1,alignment:a,allowedPlacements:m=dt,autoAlignment:d=!0,...g}=I(t,e),h=a!==void 0||m===dt?zt(a||null,d,m):m,w=await ot(e,g),p=((n=l.autoPlacement)==null?void 0:n.index)||0,x=h[p];if(x==null)return{};const y=At(x,r,await(c.isRTL==null?void 0:c.isRTL(f.floating)));if(s!==x)return{reset:{placement:h[0]}};const A=[w[H(x)],w[y[0]],w[y[1]]],v=[...((o=l.autoPlacement)==null?void 0:o.overflows)||[],{placement:x,overflows:A}],L=h[p+1];if(L)return{data:{index:p+1,overflows:v},reset:{placement:L}};const O=v.map(b=>{const R=k(b.placement);return[b.placement,R&&u?b.overflows.slice(0,2).reduce((T,F)=>T+F,0):b.overflows[0],b.overflows]}).sort((b,R)=>b[1]-R[1]),S=((i=O.filter(b=>b[2].slice(0,k(b[0])?2:3).every(R=>R<=0))[0])==null?void 0:i[0])||O[0][0];return S!==s?{data:{index:p+1,overflows:v},reset:{placement:S}}:{}}}},Zt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,o;const{placement:i,middlewareData:r,rects:l,initialPlacement:s,platform:c,elements:f}=e,{mainAxis:u=!0,crossAxis:a=!0,fallbackPlacements:m,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:h=!0,...w}=I(t,e);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const p=H(i),x=_(s),y=H(s)===s,A=await(c.isRTL==null?void 0:c.isRTL(f.floating)),v=m||(y||!h?[et(s)]:Vt(s)),L=g!=="none";!m&&L&&v.push(...Yt(s,h,g,A));const O=[s,...v],M=await ot(e,w),S=[];let b=((o=r.flip)==null?void 0:o.overflows)||[];if(u&&S.push(M[p]),a){const P=At(i,l,A);S.push(M[P[0]],M[P[1]])}if(b=[...b,{placement:i,overflows:S}],!S.every(P=>P<=0)){var R,T;const P=(((R=r.flip)==null?void 0:R.index)||0)+1,X=O[P];if(X&&(!(a==="alignment"?x!==_(X):!1)||b.every(E=>_(E.placement)===x?E.overflows[0]>0:!0)))return{data:{index:P,overflows:b},reset:{placement:X}};let V=(T=b.filter(C=>C.overflows[0]<=0).sort((C,E)=>C.overflows[1]-E.overflows[1])[0])==null?void 0:T.placement;if(!V)switch(d){case"bestFit":{var F;const C=(F=b.filter(E=>{if(L){const $=_(E.placement);return $===x||$==="y"}return!0}).map(E=>[E.placement,E.overflows.filter($=>$>0).reduce(($,Mt)=>$+Mt,0)]).sort((E,$)=>E[1]-$[1])[0])==null?void 0:F[0];C&&(V=C);break}case"initialPlacement":V=s;break}if(i!==V)return{reset:{placement:V}}}return{}}}},It=new Set(["left","top"]);async function qt(t,e){const{placement:n,platform:o,elements:i}=t,r=await(o.isRTL==null?void 0:o.isRTL(i.floating)),l=H(n),s=k(n),c=_(n)==="y",f=It.has(l)?-1:1,u=r&&c?-1:1,a=I(e,t);let{mainAxis:m,crossAxis:d,alignmentAxis:g}=typeof a=="number"?{mainAxis:a,crossAxis:0,alignmentAxis:null}:{mainAxis:a.mainAxis||0,crossAxis:a.crossAxis||0,alignmentAxis:a.alignmentAxis};return s&&typeof g=="number"&&(d=s==="end"?g*-1:g),c?{x:d*u,y:m*f}:{x:m*f,y:d*u}}const te=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,o;const{x:i,y:r,placement:l,middlewareData:s}=e,c=await qt(e,t);return l===((n=s.offset)==null?void 0:n.placement)&&(o=s.arrow)!=null&&o.alignmentOffset?{}:{x:i+c.x,y:r+c.y,data:{...c,placement:l}}}}},ee=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:o,placement:i}=e,{mainAxis:r=!0,crossAxis:l=!1,limiter:s={fn:w=>{let{x:p,y:x}=w;return{x:p,y:x}}},...c}=I(t,e),f={x:n,y:o},u=await ot(e,c),a=_(H(i)),m=bt(a);let d=f[m],g=f[a];if(r){const w=m==="y"?"top":"left",p=m==="y"?"bottom":"right",x=d+u[w],y=d-u[p];d=lt(x,d,y)}if(l){const w=a==="y"?"top":"left",p=a==="y"?"bottom":"right",x=g+u[w],y=g-u[p];g=lt(x,g,y)}const h=s.fn({...e,[m]:d,[a]:g});return{...h,data:{x:h.x-n,y:h.y-o,enabled:{[m]:r,[a]:l}}}}}},ne=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,o;const{placement:i,rects:r,platform:l,elements:s}=e,{apply:c=()=>{},...f}=I(t,e),u=await ot(e,f),a=H(i),m=k(i),d=_(i)==="y",{width:g,height:h}=r.floating;let w,p;a==="top"||a==="bottom"?(w=a,p=m===(await(l.isRTL==null?void 0:l.isRTL(s.floating))?"start":"end")?"left":"right"):(p=a,w=m==="end"?"top":"bottom");const x=h-u.top-u.bottom,y=g-u.left-u.right,A=K(h-u[w],x),v=K(g-u[p],y),L=!e.middlewareData.shift;let O=A,M=v;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(M=y),(o=e.middlewareData.shift)!=null&&o.enabled.y&&(O=x),L&&!m){const b=z(u.left,0),R=z(u.right,0),T=z(u.top,0),F=z(u.bottom,0);d?M=g-2*(b!==0||R!==0?b+R:z(u.left,u.right)):O=h-2*(T!==0||F!==0?T+F:z(u.top,u.bottom))}await c({...e,availableWidth:M,availableHeight:O});const S=await l.getDimensions(s.floating);return g!==S.width||h!==S.height?{reset:{rects:!0}}:{}}}};function D(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function W(t){return D(t).getComputedStyle(t)}const pt=Math.min,J=Math.max,nt=Math.round;function Ot(t){const e=W(t);let n=parseFloat(e.width),o=parseFloat(e.height);const i=t.offsetWidth,r=t.offsetHeight,l=nt(n)!==i||nt(o)!==r;return l&&(n=i,o=r),{width:n,height:o,fallback:l}}function N(t){return St(t)?(t.nodeName||"").toLowerCase():""}let Z;function Rt(){if(Z)return Z;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(Z=t.brands.map((e=>e.brand+"/"+e.version)).join(" "),Z):navigator.userAgent}function B(t){return t instanceof D(t).HTMLElement}function j(t){return t instanceof D(t).Element}function St(t){return t instanceof D(t).Node}function xt(t){return typeof ShadowRoot>"u"?!1:t instanceof D(t).ShadowRoot||t instanceof ShadowRoot}function it(t){const{overflow:e,overflowX:n,overflowY:o,display:i}=W(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!["inline","contents"].includes(i)}function Gt(t){return["table","td","th"].includes(N(t))}function st(t){const e=/firefox/i.test(Rt()),n=W(t),o=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!o&&o!=="none"||e&&n.willChange==="filter"||e&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some((i=>n.willChange.includes(i)))||["paint","layout","strict","content"].some((i=>{const r=n.contain;return r!=null&&r.includes(i)}))}function Tt(){return!/^((?!chrome|android).)*safari/i.test(Rt())}function ft(t){return["html","body","#document"].includes(N(t))}function Dt(t){return j(t)?t:t.contextElement}const Lt={x:1,y:1};function q(t){const e=Dt(t);if(!B(e))return Lt;const n=e.getBoundingClientRect(),{width:o,height:i,fallback:r}=Ot(e);let l=(r?nt(n.width):n.width)/o,s=(r?nt(n.height):n.height)/i;return l&&Number.isFinite(l)||(l=1),s&&Number.isFinite(s)||(s=1),{x:l,y:s}}function Q(t,e,n,o){var i,r;e===void 0&&(e=!1),n===void 0&&(n=!1);const l=t.getBoundingClientRect(),s=Dt(t);let c=Lt;e&&(o?j(o)&&(c=q(o)):c=q(t));const f=s?D(s):window,u=!Tt()&&n;let a=(l.left+(u&&((i=f.visualViewport)==null?void 0:i.offsetLeft)||0))/c.x,m=(l.top+(u&&((r=f.visualViewport)==null?void 0:r.offsetTop)||0))/c.y,d=l.width/c.x,g=l.height/c.y;if(s){const h=D(s),w=o&&j(o)?D(o):o;let p=h.frameElement;for(;p&&o&&w!==h;){const x=q(p),y=p.getBoundingClientRect(),A=getComputedStyle(p);y.x+=(p.clientLeft+parseFloat(A.paddingLeft))*x.x,y.y+=(p.clientTop+parseFloat(A.paddingTop))*x.y,a*=x.x,m*=x.y,d*=x.x,g*=x.y,a+=y.x,m+=y.y,p=D(p).frameElement}}return{width:d,height:g,top:m,right:a+d,bottom:m+g,left:a,x:a,y:m}}function Y(t){return((St(t)?t.ownerDocument:t.document)||window.document).documentElement}function rt(t){return j(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Ct(t){return Q(Y(t)).left+rt(t).scrollLeft}function U(t){if(N(t)==="html")return t;const e=t.assignedSlot||t.parentNode||xt(t)&&t.host||Y(t);return xt(e)?e.host:e}function Et(t){const e=U(t);return ft(e)?e.ownerDocument.body:B(e)&&it(e)?e:Et(e)}function kt(t,e){var n;e===void 0&&(e=[]);const o=Et(t),i=o===((n=t.ownerDocument)==null?void 0:n.body),r=D(o);return i?e.concat(r,r.visualViewport||[],it(o)?o:[]):e.concat(o,kt(o))}function wt(t,e,n){return e==="viewport"?G((function(o,i){const r=D(o),l=Y(o),s=r.visualViewport;let c=l.clientWidth,f=l.clientHeight,u=0,a=0;if(s){c=s.width,f=s.height;const m=Tt();(m||!m&&i==="fixed")&&(u=s.offsetLeft,a=s.offsetTop)}return{width:c,height:f,x:u,y:a}})(t,n)):j(e)?G((function(o,i){const r=Q(o,!0,i==="fixed"),l=r.top+o.clientTop,s=r.left+o.clientLeft,c=B(o)?q(o):{x:1,y:1};return{width:o.clientWidth*c.x,height:o.clientHeight*c.y,x:s*c.x,y:l*c.y}})(e,n)):G((function(o){const i=Y(o),r=rt(o),l=o.ownerDocument.body,s=J(i.scrollWidth,i.clientWidth,l.scrollWidth,l.clientWidth),c=J(i.scrollHeight,i.clientHeight,l.scrollHeight,l.clientHeight);let f=-r.scrollLeft+Ct(o);const u=-r.scrollTop;return W(l).direction==="rtl"&&(f+=J(i.clientWidth,l.clientWidth)-s),{width:s,height:c,x:f,y:u}})(Y(t)))}function yt(t){return B(t)&&W(t).position!=="fixed"?t.offsetParent:null}function vt(t){const e=D(t);let n=yt(t);for(;n&&Gt(n)&&W(n).position==="static";)n=yt(n);return n&&(N(n)==="html"||N(n)==="body"&&W(n).position==="static"&&!st(n))?e:n||(function(o){let i=U(o);for(;B(i)&&!ft(i);){if(st(i))return i;i=U(i)}return null})(t)||e}function Jt(t,e,n){const o=B(e),i=Y(e),r=Q(t,!0,n==="fixed",e);let l={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if(o||!o&&n!=="fixed")if((N(e)!=="body"||it(i))&&(l=rt(e)),B(e)){const c=Q(e,!0);s.x=c.x+e.clientLeft,s.y=c.y+e.clientTop}else i&&(s.x=Ct(i));return{x:r.left+l.scrollLeft-s.x,y:r.top+l.scrollTop-s.y,width:r.width,height:r.height}}const Kt={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:o,strategy:i}=t;const r=n==="clippingAncestors"?(function(f,u){const a=u.get(f);if(a)return a;let m=kt(f).filter((w=>j(w)&&N(w)!=="body")),d=null;const g=W(f).position==="fixed";let h=g?U(f):f;for(;j(h)&&!ft(h);){const w=W(h),p=st(h);(g?p||d:p||w.position!=="static"||!d||!["absolute","fixed"].includes(d.position))?d=w:m=m.filter((x=>x!==h)),h=U(h)}return u.set(f,m),m})(e,this._c):[].concat(n),l=[...r,o],s=l[0],c=l.reduce(((f,u)=>{const a=wt(e,u,i);return f.top=J(a.top,f.top),f.right=pt(a.right,f.right),f.bottom=pt(a.bottom,f.bottom),f.left=J(a.left,f.left),f}),wt(e,s,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:o}=t;const i=B(n),r=Y(n);if(n===r)return e;let l={scrollLeft:0,scrollTop:0},s={x:1,y:1};const c={x:0,y:0};if((i||!i&&o!=="fixed")&&((N(n)!=="body"||it(r))&&(l=rt(n)),B(n))){const f=Q(n);s=q(n),c.x=f.x+n.clientLeft,c.y=f.y+n.clientTop}return{width:e.width*s.x,height:e.height*s.y,x:e.x*s.x-l.scrollLeft*s.x+c.x,y:e.y*s.y-l.scrollTop*s.y+c.y}},isElement:j,getDimensions:function(t){return B(t)?Ot(t):t.getBoundingClientRect()},getOffsetParent:vt,getDocumentElement:Y,getScale:q,async getElementRects(t){let{reference:e,floating:n,strategy:o}=t;const i=this.getOffsetParent||vt,r=this.getDimensions;return{reference:Jt(e,await i(n),o),floating:{x:0,y:0,...await r(n)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>W(t).direction==="rtl"},oe=(t,e,n)=>{const o=new Map,i={platform:Kt,...n},r={...i.platform,_c:o};return Xt(t,e,{...i,platform:r})};export{oe as B,kt as D,Ut as a,Qt as b,ne as c,Zt as f,te as o,ee as s};
