!function r(a,o,i){function s(e,t){if(!o[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(c)return c(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}n=o[e]={exports:{}},a[e][0].call(n.exports,function(t){return s(a[e][1][t]||t)},n,n.exports,r,a,o,i)}return o[e].exports}for(var c="function"==typeof require&&require,t=0;t<i.length;t++)s(i[t]);return s}({1:[function(t,e,n){e.exports=function(){return{settings:{graphicHeight:400},init:function(){this.addBarGraph()},addBarGraph:function(){var u=this,d=[{river:"Yangtze",countries:["China"],amount:333e3},{river:"Ganges",countries:["India","Bangladesh"],amount:115e3},{river:"Xi",countries:["China"],amount:73900},{river:"Huangpu",countries:["China"],amount:40800},{river:"Cross",countries:["Nigeria","Cameroon"],amount:40300},{river:"Brantas",countries:["Indonesia"],amount:38900},{river:"Amazon",countries:["Brazil","Peru","Columbia","Ecuador"],amount:38900},{river:"Pasig",countries:["Philippines"],amount:38800},{river:"Irrawaddy",countries:["Myanmar"],amount:35300},{river:"Solo",countries:["Indonesia"],amount:32500},{river:"Mekong",countries:["Thailand","Cambodia","Laos","China","Myanmar","Vietnam"],amount:22800},{river:"Imo",countries:["Nigeria"],amount:21500},{river:"Dong",countries:["China"],amount:19100},{river:"Serayu",countries:["Indonesia"],amount:17100},{river:"Magdalena",countries:["Colombia"],amount:16700},{river:"Tamsui",countries:["Taiwan"],amount:14700},{river:"Zhujiang",countries:["China"],amount:13600},{river:"Hanjiang",countries:["China"],amount:12900},{river:"Progo",countries:["Indonesia"],amount:12800},{river:"Kwa Ibo",countries:["Nigeria"],amount:11900}];document.querySelectorAll(".horizontal-bar").forEach(function(t){var e=60,n=40,r=80,a=100,o=t.parentElement.offsetWidth-a-n,i=u.settings.graphicHeight-e-r,s=d3.scaleBand().range([i,0]),c=d3.scaleLinear().range([0,o]),t=d3.select(t).append("svg").attr("width",o+a+n).attr("height",i+e+r).append("g").attr("transform","translate("+a+","+e+")"),n=(d.forEach(function(t){t.amount=+t.amount}),d=d.sort(function(t,e){return e.amount-t.amount}),d3.max(d,function(t){return t.amount})),n=(c.domain([0,n+.02*n]),s.domain(d.map(function(t){return t.river})),t.selectAll(".bar").data(d).enter().append("rect").attr("class","bar").attr("width",function(t){return c(t.amount)}).attr("y",function(t){return s(t.river)+(s.bandwidth()/2-2.5)}).attr("height",5),t.append("g").attr("transform","translate(0,"+(6+i)+")").call(d3.axisBottom(c)),t.append("g").call(d3.axisLeft(s).tickSize(0)),t.append("text").attr("class","title").text("Top 20 Global Rivers Ranked by Ocean Plastic Input")),l=n.node().getBBox().width,n=(n.node().getBBox().height,n.attr("transform","translate("+(o/2-l/2-a/2)+", "+(e/2*-1+10)+")"),t.append("text").attr("class","x-axis-label").html("Mass of Plastic Input in Tons Per Year")),l=n.node().getBBox().width;n.node().getBBox().height;n.attr("transform","translate("+(o/2-l/2-a/2)+", "+(20+i+r/2)+")")})}}}},{}],2:[function(t,e,n){t("leaflet-arc"),e.exports=function(){parseInt(document.querySelector(".fullscreen-map").offsetWidth),parseInt(document.querySelector(".fullscreen-map").offsetHeight);var i,l,s,c,u,d,p,h,n,t,m,f,g,y,e="https://stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}{r}.png?access_token={accessToken}",r=(new L.LatLng(23.638,120.998),{location:new L.LatLng(30,20),zoom:2.5}),v=(new L.LatLng(10,70),L.map("map",{zoomControl:!1,zoomSnap:.01}).setView(r.location,r.zoom)),a=d3.select("#map").select("svg"),r=(a.select("g").attr("class","points").append("g"),L.latLng(120,-171)),o=L.latLng(-40,175),r=L.latLngBounds(r,o);return v.setZoom(v.getBoundsZoom(r)),L.svg().addTo(v),{init:function(){this.map(),this.exports(),this.bindUI()},toolTip:function(){t=d3.tip().attr("class","d3-tip").offset([-12,0]).html(function(t){return'<div class="tooltip"><h5>'+t.name+"</h5></div>"}),a.call(t)},exports:function(){var e=this;d3.csv("./assets/js/data/imports.csv",function(t){var e=[];e.amount=t[2017],"World"===t["Partner Name"]&&(c=e.amount);"Europe & Central Asia"===t["Partner Name"]||"East Asia & Pacific"===t["Partner Name"]||"North America"===t["Partner Name"]||"Latin America & Caribbean"===t["Partner Name"]||"Middle East & North Africa"===t["Partner Name"]||"South Asia"===t["Partner Name"]||"Sub-Saharan Africa"===t["Partner Name"]||"Australia"===t["Partner Name"]||"World"===t["Partner Name"]?e.region=t["Partner Name"]:e.country=t["Partner Name"];if(""!==e.amount&&e.country)return e}).then(function(t){p=t}),d3.csv("./assets/js/data/mismanagedglobal.csv",function(t){var e=[];if(e.amount=t["Share of plastic inadequately managed (%)"],e.country=t.Entity,""!==e.amount&&e.country)return e}).then(function(t){h=t}),d3.json("./assets/js/data/ne_10m_admin_0_countries.json").then(function(t){n=t,d3.csv("./assets/js/data/exports.csv",function(t){var e=[];e.amount=t[2017],"World"===t["Partner Name"]&&(c=e.amount);"Europe & Central Asia"===t["Partner Name"]||"East Asia & Pacific"===t["Partner Name"]||"North America"===t["Partner Name"]||"Latin America & Caribbean"===t["Partner Name"]||"Middle East & North Africa"===t["Partner Name"]||"South Asia"===t["Partner Name"]||"Sub-Saharan Africa"===t["Partner Name"]||"Australia"===t["Partner Name"]||"World"===t["Partner Name"]?e.region=t["Partner Name"]:e.country=t["Partner Name"];if(""!==e.amount&&e.country)return e}).then(function(t){u=d=t,e.showCountries(),e.addBarGraph()})})},map:function(){var t=d3.select(".fullscreen-map");parseInt(t.offsetWidth),parseInt(t.offsetHeight),d3.map();L.tileLayer(e,{id:"mapbox.light",accessToken:"pk.eyJ1IjoiamFnb2R3aW4iLCJhIjoiY2lnOGQxaDhiMDZzMXZkbHYzZmN4ZzdsYiJ9.Uwh_L37P-qUoeC-MBSDteA",edgeBufferTiles:2,reuseTiles:!0,format:"jpg70",noWrap:!0}).addTo(v),v.doubleClickZoom.disable(),v.scrollWheelZoom.disable()},showLabels:function(){L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.png?access_token={accessToken}",{id:"mapbox.light",accessToken:"pk.eyJ1IjoiamFnb2R3aW4iLCJhIjoiY2lnOGQxaDhiMDZzMXZkbHYzZmN4ZzdsYiJ9.Uwh_L37P-qUoeC-MBSDteA",edgeBufferTiles:2}).addTo(v)},hideLabels:function(){L.tileLayer(e,{id:"mapbox.light",accessToken:"pk.eyJ1IjoiamFnb2R3aW4iLCJhIjoiY2lnOGQxaDhiMDZzMXZkbHYzZmN4ZzdsYiJ9.Uwh_L37P-qUoeC-MBSDteA",edgeBufferTiles:2}).addTo(v)},showCountries:function(){function t(t,e){return e.amount-t.amount}u=u.sort(t).slice(0,20),u.sort(t).slice(0,20),u[19].amount;var r=u[0].amount;(l=L.geoJson(n,{style:function(e){var n;return u.forEach(function(t){e.properties.NAME===t.country&&(n={fillColor:"#E66200",weight:.25,opacity:1,color:"black",fillOpacity:t.amount/r*.4+.3})}),n||{fillColor:"red",weight:2,opacity:0,color:"black",fillOpacity:0}},onEachFeature:this.eachGeoFeature})).addTo(v)},eachGeoFeature:function(t,e){var c;e.on({mouseover:function(t){var e=t.target.feature.properties.NAME_EN,n="",r="",a="",o=d.filter(function(t){if(t.country===e)return t}),i=p.filter(function(t){if(t.country===e)return t}),s=h.filter(function(t){if(t.country===e)return t}),o=(o[0]&&(n=parseInt(o[0].amount).toLocaleString()),i[0]&&(r=parseInt(i[0].amount).toLocaleString()),s[0]&&(a=s[0].amount),'<div class="popup-custom">'),o=(o+='<h4 class="country">'+e+"</h4>")+('<div class="exports"><strong>Total exports (USD):</strong> $'+n+"</div>")+('<div class="imports"><strong>Total imports (USD):</strong> $'+r+"</div>");a&&(o+='<div class="mismanaged"><strong>Global share of mismanaged waste:</strong> '+a+"%</div>"),o+="</div>",c=L.popup({minWidth:500},l).setLatLng(t.latlng).setContent(o).openOn(v)},mouseout:function(t){c&&!t.originalEvent.toElement.classList.contains("leaflet-popup-content-wrapper")&&c.remove()},click:function(){}})},addBarGraph:function(){var n=this,t=(i=document.querySelector(".geo-vis .bar-graph")).parentElement,t=(f={top:60,right:100,bottom:80,left:200},m=t.offsetWidth-f.left-f.right,g=425-f.top-f.bottom,d3.max(u,function(t){return+t.amount})),e=(u=u.sort(function(t,e){return t.amount-e.amount})).slice(0)[19],r=y?e.amount:c/e.amount,a=(n.updateStats(r,e.country,e.amount),d3.scaleBand().domain(u.map(function(t){return t.country})).range([g,0])),o=d3.scaleLinear().domain([0,t]).range([0,m-100]),r=d3.select(i).append("svg").attr("width",m+f.left+f.right).attr("height",g+f.top+f.bottom).append("g").attr("transform","translate("+f.left+","+f.top+")"),e=(r.selectAll(".bar").data(u).enter().append("rect").on("mouseover",function(t){d3.event.target.style.fill="#E66200";var e=parseInt(t.amount)/parseInt(c)*100;y?n.updateStats(t.amount,t.country,""):n.updateStats(e,t.country,t.amount)}).on("mouseout",function(){d3.event.target.style.fill="#E6965B"}).on("click",function(t){}).attr("class","bar").attr("y",function(t){return a(t.country)+(a.bandwidth()/2-3.5)}).attr("height",7).attr("width",0).transition().delay(function(t,e){return 40*e}).ease(d3.easeCubicOut).duration(300).attr("width",function(t){return o(t.amount)}),r.append("g").attr("transform","translate(0,"+(g+6)+")").call(d3.axisBottom(o)),r.append("g").call(d3.axisLeft(a).tickSize(0)),(s=r.append("text").attr("class","x-axis-label").html("Top 20 Global Plastic Exporters (USD)")).node().getBBox().width);s.node().getBBox().height;s.attr("transform","translate("+(m/2-e/2-f.left/2)+", "+(g+20+f.bottom/2)+")")},updateStats:function(t,e,n){var r=document.querySelector(".geo-vis .stats .country"),a=document.querySelector(".geo-vis .stats .percentage-of-total"),o=document.querySelector(".geo-vis .stats .valuation span");t=utils.roundTenths(t),r.textContent=e,a.textContent=t+"%",""!==n?(o.parentElement.style.display="block",o.textContent=parseInt(n).toLocaleString()):o.parentElement.style.display="none"},setStatsLabel:function(t){document.querySelector(".geo-vis .stats .label").textContent=t},bindUI:function(){var n=this,r=document.querySelectorAll("#plasticExports,#plasticImports,#plasticMismanaged"),t=document.querySelector("#plasticExports"),e=(t&&t.addEventListener("click",function(){u=d,y=!1,n.reset(),n.showCountries(),n.addBarGraph(),n.setStatsLabel("total global plastic exports"),s.html("Top 20 Global Plastic Exporters (USD)"),r.forEach(function(t){t.classList.remove("active")}),t.classList.add("active")}),document.querySelector("#plasticImports")),a=(e&&e.addEventListener("click",function(){u=p,y=!1,n.reset(),n.showCountries(),n.addBarGraph(),n.setStatsLabel("total global plastic imports"),s.html("Top 20 Global Plastic Importers (USD)"),r.forEach(function(t){t.classList.remove("active")}),e.classList.add("active")}),document.querySelector("#plasticMismanaged")),o=(a&&a.addEventListener("click",function(){u=h,y=!0,n.reset(),n.showCountries(),n.addBarGraph(),n.setStatsLabel("global share of mismanaged waste"),s.html("Percentage of Global Mismanaged Plastic Waste, Global Top 20");var t=s.node().getBBox().width,e=s.node().getBBox().height;s.attr("transform","translate("+(m/2-t/2-f.left/2)+", "+(g+e+f.bottom/2)+")"),r.forEach(function(t){t.classList.remove("active")}),a.classList.add("active"),document.querySelector(".geo-vis .stats .valuation").style.display="none"}),document.querySelector(".geo-vis .zooms .in")),o=(o&&o.addEventListener("click",function(){v.setZoom(v.getZoom()+.75)}),document.querySelector(".geo-vis .zooms .out"));o&&o.addEventListener("click",function(){v.setZoom(v.getZoom()-.75)})},reset:function(){i.innerHTML="",l.remove()}}}},{"leaflet-arc":8}],3:[function(t,e,n){e.exports=function(){var t=document.querySelector(".plastic-longevity .graphic"),g=[{years:450}],b=(t&&parseInt(t.offsetWidth),document.querySelector("#dotCanvas")),u=document.querySelector(".plastic-longevity .canvas-holder"),d=0,p=0,w=0,h=document.querySelector(".plastic-longevity .unit-vis-viewport"),m=(document.querySelector(".plastic-longevity .message"),document.querySelector(".use-ratio .count")),o={materials:{bottle:{title:"1 Plastic Bottle",path:"./assets/img/bottle-black.jpg",useTimeHours:1,useTimeDisplay:"1 hour",mass:"24g",breakdownTime:450,breakdownTimeDisplay:"450 years"},coffee:{title:"1 Plastic Coffee Lid",path:"./assets/svg/coffee.svg",useTimeHours:2,useTimeDisplay:"2 hours",mass:"4.48g",breakdownTime:425,breakdownTimeDisplay:"425 years"},vegetable:{title:"Vegetable",path:"./assets/svg/vegetable.svg",useTimeHours:2,useTimeDisplay:"2 hours",mass:"",breakdownTime:.246575,breakdownTimeDisplay:"3 months"},cardboard:{title:"Cardboard",path:"./assets/img/cardboard.png",useTimeHours:72,useTimeDisplay:"3 days",mass:"Variable",breakdownTime:.249315,breakdownTimeDisplay:"3 months"}}};return{init:function(){this.longevityTimescale(),this.bindUI(),this.miniMap(),this.setMaterial("bottle")},longevityTimescale:function(){for(var e,n,t=document.querySelector(".generation-glyphs .frame"),r=document.querySelector(".longevity"),a=5,o=50,i=80,s=20,c=r.parentElement.offsetWidth-s-o,l=140-a-i,u=0,d=d3.scaleBand().range([l,0]),p=d3.scaleLinear().range([0,c]),r=d3.select(r).append("svg").attr("width",c+s+o).attr("height",l+a+i).append("g").attr("transform","translate("+s+","+a+")"),o=(g.forEach(function(t){t.years=+t.years}),g=g.sort(function(t,e){return e.years-t.years}),d3.max(g,function(t){return t.years})),s=(p.domain([0,o+.2*o]),r.append("text").attr("class","x-axis-label").html("Years to Break Down")),a=s.node().getBBox().width,h=(s.node().getBBox().height,s.attr("transform","translate("+(c/2-a)+", "+(20+l+i/2)+")"),r.selectAll(".bar").data(g).enter().append("rect").attr("class","bar").attr("width",function(t){return u=p(t.years),e=t.years/76,n=p(t.years%76),p(t.years)}).attr("height",15),document.querySelector(".generation-glyphs")),m=0;m<Math.ceil(e)-1;m++)h.append(t.cloneNode(!0));var f=u/e,o=h.querySelectorAll(".frame");o.length&&(o.forEach(function(t){var e=t.querySelector("img");t.style.width=f+"px",e.width=f}),o[o.length-1].style.width=n-5+"px"),r.append("g").attr("transform","translate(0,"+(6+l)+")").call(d3.axisBottom(p)),r.append("g").call(d3.axisLeft(d).tickSize(0))},bindUI:function(){var n=this,r=document.querySelector("#longevitySelector");r&&r.addEventListener("change",function(t){n.setMaterial(r.value),u.innerHTML="";var e=o.materials[r.value].breakdownTime;g=[{years:e}],e<1?(document.querySelector(".longevity").innerHTML="",document.querySelector(".generation-glyphs").innerHTML=""):(document.querySelector(".longevity").innerHTML="",document.querySelector(".generation-glyphs").innerHTML='<div class="frame"><img src="./assets/svg/generation-white.svg" alt="generation icon"></div>'),n.longevityTimescale()})},setMaterial:function(t){var e=o.materials[t],n=document.querySelector(".plastic-longevity .graphic img"),t=(n&&(n.classList="",n.classList.add(t),n.setAttribute("src",e.path)),document.querySelector(".plastic-longevity .stats .material span")),n=document.querySelector(".plastic-longevity .stats .use-time span"),r=document.querySelector(".plastic-longevity .stats .generations span"),a=document.querySelector(".plastic-longevity .stats .lifetimes span");t&&(t.textContent=e.title),n&&(n.textContent=e.useTimeDisplay),r&&(r.textContent=e.breakdownTimeDisplay);t=(t=e.breakdownTime/76)<1?t.toFixed(3):t.toFixed(1),a&&(a.textContent=t.toString()+" lifetimes"),n=document.querySelector(".baseline span");n&&(n.textContent="("+e.useTimeDisplay+")")},useRatio:function(t,e){var n,r,a=8760*e/t,o=document.querySelector(".use-ratio .canvas-holder"),i=(o&&(n=parseInt(o.offsetWidth)),b.getContext("2d")),s=n,c=1200,l=2,u=5;function d(){b.width=s,b.height=c,r=(()=>{var t=0;w=0;for(var e=2*l;e<s;e+=u)for(var n=2*l;n<c;n+=u)i.beginPath(),i.arc(e-l/2,n-l/2,l,0,2*Math.PI,!1),i.fillStyle="rgba(255, 255, 255, .4)",i.fill(),t++;return t})()}d();for(var p,h,m,f=t*r/8760,g=76,y=Math.floor(a/r),v=1,x=0;x<y+1;x++)g<x*f&&((h=document.createElement("div")).classList.add("year-indicator"),p=v+" human generations",1===v&&(p=p.slice(0,-1)),p=document.createTextNode(p),h.appendChild(p),o.appendChild(h),g+=76,v++),o.append((p=b,m=h=void 0,h=document.createElement("canvas"),m=h.getContext("2d"),h.width=p.width,h.height=p.height,m.drawImage(p,0,0),h)),b.remove(),w+=r,0===y&&(w=Math.floor(a));window.addEventListener("resize",d,!1)},miniMap:function(){var e,n,r,a,o,i,t=document.querySelector(".mini-map"),s=document.querySelector(".mini-map .dragger"),c=document.querySelector(".plastic-longevity .column-left");function l(){0<(p=d=a+(r-n))&&d<o?s.style.transform="translateY("+d+"px)":d<0?(d=0,s.style.transform="translateY("+d+"px)"):o<d&&(d=o-1,s.style.transform="translateY("+d+"px)"),i=d/(o-1);var t=u.offsetHeight*i;h.scrollTo(0,t)}t&&s&&c&&u&&h&&(e=!1,o=c.getBoundingClientRect().height-s.getBoundingClientRect().height,i=0,s.addEventListener("mousedown",function(t){return a=p,isNaN(a)&&(a=0),n=t.clientY,e=!0,l(),!1}),document.addEventListener("mousemove",function(t){r=t.clientY,e&&l()}),document.addEventListener("mouseup",function(t){e=!1}),h.addEventListener("scroll",function(t){u.offsetHeight;var e=h.scrollTop/(h.scrollHeight-h.clientHeight),n=m.querySelector(".number"),r=m.querySelector(".caption");n&&(n.textContent=Math.floor(w*e).toLocaleString()+"x"),r&&(m.querySelector(".caption").style.opacity="1"),p=d=o*e,s.style.transform="translateY("+d+"px)"}))}}}},{}],4:[function(t,e,n){e.exports=function(){var o,i,s,c,l,u,d;return{init:function(){this.loadData()},loadData:function(){var e=this;d3.csv("./assets/js/data/global-plastics-production.csv",function(t,e){var n={};return n.year=t.Year,n.amount=t["Global plastics production (million tons)"],n}).then(function(t){(o=t).unshift({year:"1950",amount:0}),o.push({year:"2015",amount:0}),e.lineChart(),e.addAxes()})},lineChart:function(){var t=o,n=(s=document.querySelector(".projections .plot-container").offsetWidth,c=.8*window.innerHeight,l=s-(d={top:0,right:200,bottom:50,left:25}).left-d.right,u=c-d.top-d.bottom,i=d3.select(".projections svg").attr("class","line-graph").attr("width",s).attr("height",c).append("g").attr("transform","translate("+d.left+","+d.top+")"),d3.scaleLinear().domain([1950,2015]).range([0,l])),e=d3.max(t,function(t){return+t.amount}),r=d3.scaleLinear().domain([0,e]).range([u,0]),a=(i.append("g").attr("class","x axis").attr("transform","translate(0,"+u+")").call(d3.axisBottom(n).tickFormat(d3.format("d"))),d3.format(".2s")),e=(i.append("g").attr("class","y axis").attr("transform","translate("+l+", 0)").call(d3.axisRight(r).tickFormat(function(t){return a(t).replace("M"," million tons")})),d3.line().x(function(t,e){return n(t.year)}).y(function(t){return r(t.amount)}).curve(d3.curveMonotoneX));i.append("path").datum(t).attr("class","line").attr("d",e)},addAxes:function(){var t=i.append("text").attr("class","title").text("Yearly Plastic Production Since 1950"),t=(t.node().getBBox().width,t.node().getBBox().height,t.attr("transform","translate(0, "+(u-40)+")"),i.append("text").attr("class","x-axis-label").html("metric tons"));t.node().getBBox().width,t.node().getBBox().height;t.attr("transform","translate("+(l+30)+", "+(u+3)+")")}}}},{}],5:[function(t,e,n){e.exports=function(){var y,v,i=document.querySelector(".sunburst-component .stats");return{init:function(){this.sunburst(),this.addIcon()},sunburst:function(){var l=this,u=d3.format(",d"),d=document.querySelector(".sunburst .sunburst-container").offsetWidth,p=d/6,h=(document.querySelector(".sunburst").style.height=d+"px",d3.arc().startAngle(function(t){return t.x0}).endAngle(function(t){return t.x1}).padAngle(function(t){return Math.min((t.x1-t.x0)/2,.005)}).padRadius(1.5*p).innerRadius(function(t){return t.y0*p}).outerRadius(function(t){return Math.max(t.y0*p,t.y1*p-1)}));function m(t){return t.y1<=3&&1<=t.y0&&t.x1>t.x0}function f(t){return t.y1<=3&&1<=t.y0&&.03<(t.y1-t.y0)*(t.x1-t.x0)}function g(t){var e=(t.x0+t.x1)/2*180/Math.PI,t=(t.y0+t.y1)/2*p;return"rotate(".concat(e-90,") translate(").concat(t,",0) rotate(").concat(e<180?0:180,")")}d3.json("./assets/js/data/sunburst-countries.json").then(function(t,e){var n=(t=>(t=d3.hierarchy(t).sum(function(t){return t.size}).sort(function(t,e){return e.value-t.value}),d3.partition().size([2*Math.PI,t.height+1])(t)))(t),r=d3.scaleOrdinal().range(d3.quantize(d3.interpolateRainbow,t.children.length+1)),a=(n.each(function(t){return t.current=t}),(y=d3.select("#partitionSVG").style("height",d.toString()+"px").style("font","9px sans-serif")).append("g").attr("transform","translate(".concat(d/2,",").concat(d/2,")"))),o=a.append("g").selectAll("path").data(n.descendants().slice(1)).join("path").attr("fill",function(t){for(;1<t.depth;)t=t.parent;return r(t.data.name)}).attr("fill-opacity",function(t){return m(t.current)?t.children?.6:.4:0}).attr("d",function(t){return h(t.current)}),i=(o.filter(function(t){return t.children}).style("cursor","pointer").on("click",c),o.append("title").text(function(t){return"".concat(t.ancestors().map(function(t){return t.data.name}).reverse().join("/"),"\n").concat(u(t.value/1e3)+" metric tons")}),a.append("g").attr("pointer-events","none").attr("text-anchor","middle").style("user-select","none").selectAll("text").data(n.descendants().slice(1)).join("text").attr("dy","0.35em").attr("fill-opacity",function(t){return+f(t.current)}).attr("transform",function(t){return g(t.current)}).text(function(t){return t.data.name})),s=a.append("circle").datum(n).attr("r",p).attr("fill","none").attr("pointer-events","all").on("click",c);function c(e){s.datum(e.parent||n),n.each(function(t){return t.target={x0:2*Math.max(0,Math.min(1,(t.x0-e.x0)/(e.x1-e.x0)))*Math.PI,x1:2*Math.max(0,Math.min(1,(t.x1-e.x0)/(e.x1-e.x0)))*Math.PI,y0:Math.max(0,t.y0-e.depth),y1:Math.max(0,t.y1-e.depth)}});var t=a.transition().duration(500);o.transition(t).tween("data",function(e){var n=d3.interpolate(e.current,e.target);return function(t){return e.current=n(t)}}).filter(function(t){return+this.getAttribute("fill-opacity")||m(t.target)}).attr("fill-opacity",function(t){return m(t.target)?t.children?.6:.4:0}).attrTween("d",function(t){return function(){return h(t.current)}}),i.filter(function(t){return this.getAttribute("fill-opacity")||f(t.target)}).transition(t).attr("fill-opacity",function(t){return+f(t.target)}).attrTween("transform",function(t){return function(){return g(t.current)}}),null===e.parent?v.style.opacity="0":v.style.opacity="1",e.children.length<10?l.updateStats(e.children,e):l.hideStats()}})},hideStats:function(){i.style.opacity="0"},updateStats:function(t,o){i.innerHTML="",t.forEach(function(t){var e=t.data.name,n=document.createElement("div"),r=document.createElement("div"),a=document.createElement("div"),t=(n.classList.add("region"),r.classList.add("percentage"),a.classList.add("region-name"),t.value/o.value*100);r.innerText=t.toFixed(0)+"%",t<1&&(r.innerText="â€¹1%"),a.innerText=e,n.appendChild(r),n.appendChild(a),i.appendChild(n)}),i.style.opacity="1"},addIcon:function(){d3.xml("./assets/svg/goback.svg").then(function(t){var t=t.documentElement,e=((v=t).classList.add("up-one-level"),y.node().append(t),y.node().parentElement.offsetWidth),n=.1*e,t=t.getBBox().width;y.select(".up-one-level").attr("height",n).attr("x",e/2-t/2-.02*t).attr("y",e/2-n/2)})},initButtons:function(){var t=document.querySelectorAll(".sunburst .region-selector buttons");t&&t.foreach(function(t){t.addEventListener("click",function(){})})}}}},{}],6:[function(t,e,n){var r=t("./components/horizontal-bar.js"),a=t("./components/plastic-longevity.js"),o=t("./components/maps.js"),i=t("./components/sunburst.js"),s=t("./components/projections.js");t("./utils.js");document.addEventListener("DOMContentLoaded",function(){r().init(),a().init(),o().init(),i().init(),s().init()})},{"./components/horizontal-bar.js":1,"./components/maps.js":2,"./components/plastic-longevity.js":3,"./components/projections.js":4,"./components/sunburst.js":5,"./utils.js":7}],7:[function(t,e,n){window.utils={appSettings:{breakpoints:{mobileMax:767,tabletMin:768,tabletMax:991,desktopMin:992,desktopLargeMin:1200}},mobile:function(){return window.innerWidth<this.appSettings.breakpoints.tabletMin},tablet:function(){return window.innerWidth>this.appSettings.breakpoints.mobileMax&&window.innerWidth<this.appSettings.breakpoints.desktopMin},desktop:function(){return window.innerWidth>this.appSettings.breakpoints.desktopMin},getBreakpoint:function(){return window.innerWidth<this.appSettings.breakpoints.tabletMin?"mobile":window.innerWidth<this.appSettings.breakpoints.desktopMin?"tablet":"desktop"},debounce:function(r,a,o){var i;return function(){var t=this,e=arguments,n=o&&!i;clearTimeout(i),i=setTimeout(function(){i=null,o||r.apply(t,e)},a),n&&r.apply(t,e)}},anyOnScreen:function(t){var e=$(window),n={top:e.scrollTop(),left:e.scrollLeft()},e=(n.right=n.left+e.width(),n.bottom=n.top+e.height(),t.offset());return e.right=e.left+t.outerWidth(),e.bottom=e.top+t.outerHeight(),!(n.right<e.left||n.left>e.right||n.bottom<e.top||n.top>e.bottom)},allOnScreen:function(t){var e=$(window),n={top:e.scrollTop(),left:e.scrollLeft()},e=(n.right=n.left+e.width(),n.bottom=n.top+e.height(),t.offset());return e.right=e.left+t.outerWidth(),e.bottom=e.top+t.outerHeight(),!(n.bottom<e.top&&n.top>e.bottom)},secondsToMilliseconds:function(t){return 1e3*t},shuffleArray:function(t){for(var e,n,r=t.length;0!==r;)n=Math.floor(Math.random()*r),e=t[--r],t[r]=t[n],t[n]=e;return t},getTransitionDuration:function(t){t=$(t);return utils.secondsToMilliseconds(parseFloat(getComputedStyle(t[0]).transitionDuration))},randomInt:function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t},roundTenths:function(t){return Math.round(10*t)/10},roundHundreths:function(t){return Math.round(100*t)/100},isInteger:function(t){return t%1==0},rotate:function(t){return t.push(t.shift()),t}},e.exports=window.utils},{}],8:[function(t,e,n){var r,a;r=this,a=function(){return r=[function(t,e,n){function a(t){return{x:t.lng,y:t.lat}}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},n=n(2),s=(n=n)&&n.__esModule?n:{default:n};if(!L)throw new Error("Leaflet is not defined");L.Polyline.Arc=function(t,e,n){var r,t=L.latLng(t),e=L.latLng(e),n=o({vertices:10,offset:10},n),e=new s.default.GreatCircle(a(t),a(e)).Arc(n.vertices,{offset:n.offset}),e=(t=t,(e=e).geometries[0]&&e.geometries[0].coords[0]?(r=t.lng-e.geometries[0].coords[0][0]-360,"object"===(void 0===(t={v:e.geometries.map(function(t){return r+=360,t.coords.map(function(t){return L.latLng([t[1],t[0]+r])})}).reduce(function(t,e){return t.concat(e)})})?"undefined":i(t))?t.v:void 0):[]);return L.polyline(e,n)}},function(t,e){function a(t,e){this.lon=t,this.lat=e,this.x=r*t,this.y=r*e}function P(){this.coords=[],this.length=0}function I(t){this.properties=t||{},this.geometries=[]}function n(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new a(t.x,t.y),this.end=new a(e.x,e.y),this.properties=n||{};var n=this.start.x-this.end.x,r=this.start.y-this.end.y,r=Math.pow(Math.sin(r/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(n/2),2);if(this.g=2*Math.asin(Math.sqrt(r)),this.g==Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)}var r=Math.PI/180,o=180/Math.PI;a.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},a.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new a(e,t)},P.prototype.move_to=function(t){this.length++,this.coords.push(t)},I.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1==this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},I.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};n.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),t=Math.sin(t*this.g)/Math.sin(this.g),n=e*Math.cos(this.start.y)*Math.cos(this.start.x)+t*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+t*Math.cos(this.end.y)*Math.sin(this.end.x),e=e*Math.sin(this.start.y)+t*Math.sin(this.end.y),t=o*Math.atan2(e,Math.sqrt(Math.pow(n,2)+Math.pow(r,2)));return[o*Math.atan2(r,n),t]},n.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),a=0;a<t;++a){var o=this.interpolate(r*a);n.push(o)}for(var i=!1,s=0,e=e&&e.offset?e.offset:10,c=180-e,l=-180+e,u=360-e,d=1;d<n.length;++d){var p=n[d-1][0],h=n[d][0],m=Math.abs(h-p);u<m&&(c<h&&p<l||c<p&&h<l)?i=!0:s<m&&(s=m)}var f=[];if(i&&s<e){var g=[];f.push(g);for(var y=0;y<n.length;++y){var v,x,b,w,S,L=parseFloat(n[y][0]);0<y&&Math.abs(L-n[y-1][0])>u?(v=parseFloat(n[y-1][0]),x=parseFloat(n[y-1][1]),S=parseFloat(n[y][0]),b=parseFloat(n[y][1]),-180<v&&v<l&&180==S&&y+1<n.length&&-180<n[y-1][0]&&n[y-1][0]<l?(g.push([-180,n[y][1]]),y++,g.push([n[y][0],n[y][1]])):c<v&&v<180&&-180==S&&y+1<n.length&&n[y-1][0]>c&&n[y-1][0]<180?(g.push([180,n[y][1]]),y++,g.push([n[y][0],n[y][1]])):(v<l&&c<S&&(w=v,v=S,S=w,w=x,x=b,b=w),c<v&&S<l&&(S+=360),v<=180&&180<=S&&v<S?(g.push([n[y-1][0]>c?180:-180,S=(w=(180-v)/(S-v))*b+(1-w)*x]),(g=[]).push([n[y-1][0]>c?-180:180,S]),f.push(g)):f.push(g=[]),g.push([L,n[y][1]]))):g.push([n[y][0],n[y][1]])}}else{var M=[];f.push(M);for(var T=0;T<n.length;++T)M.push([n[T][0],n[T][1]])}for(var k=new I(this.properties),C=0;C<f.length;++C){var E=new P;k.geometries.push(E);for(var B=f[C],q=0;q<B.length;++q)E.move_to(B[q])}return k},void 0!==t&&void 0!==t.exports&&(t.exports.Coord=a,t.exports.Arc=I,t.exports.GreatCircle=n)},function(t,e,n){t.exports=n(1)}],a={},n.m=r,n.c=a,n.p="",n(0);function n(t){var e;return(a[t]||(e=a[t]={exports:{},id:t,loaded:!1},r[t].call(e.exports,e,e.exports,n),e.loaded=!0,e)).exports}var r,a},"object"==typeof n&&"object"==typeof e?e.exports=a():"function"==typeof define&&define.amd?define("leaflet-arc",[],a):"object"==typeof n?n["leaflet-arc"]=a():r["leaflet-arc"]=a()},{}]},{},[6]);